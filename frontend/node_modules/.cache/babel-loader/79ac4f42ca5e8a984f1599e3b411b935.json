{"ast":null,"code":"import { ethers, Contract } from 'ethers';\nimport PaymentProcessor from './contracts/PaymentProcessor.json';\nimport Usdt from './contracts/usdt.json';\n\nconst getBlockchain = () => new Promise((resolve, reject) => {\n  window.addEventListener('load', async () => {\n    if (window.ethereum) {\n      await window.ethereum.enable();\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const paymentProcessor = new Contract(PaymentProcessor.networks[window.ethereum.networkVersion].address, PaymentProcessor.abi, signer);\n      const usdt = new Contract(Usdt.networks[window.ethereum.networkVersion].address, //for mainnet and public testnet replace by address of already deployed dai token\n      Usdt.abi, signer);\n      resolve({\n        provider,\n        paymentProcessor,\n        usdt\n      });\n    }\n\n    resolve({\n      provider: undefined,\n      paymentProcessor: undefined,\n      usdt: undefined\n    });\n  });\n});\n\nexport default getBlockchain;","map":{"version":3,"sources":["/Users/salihcemil/Desktop/projects/ecommerce/frontend/src/ethereum.js"],"names":["ethers","Contract","PaymentProcessor","Usdt","getBlockchain","Promise","resolve","reject","window","addEventListener","ethereum","enable","provider","providers","Web3Provider","signer","getSigner","paymentProcessor","networks","networkVersion","address","abi","usdt","undefined"],"mappings":"AAAA,SAAQA,MAAR,EAAgBC,QAAhB,QAA+B,QAA/B;AACA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,OAAOC,IAAP,MAAiB,uBAAjB;;AAEA,MAAMC,aAAa,GAAG,MACpB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/BC,EAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgC,YAAY;AAC1C,QAAGD,MAAM,CAACE,QAAV,EAAoB;AAClB,YAAMF,MAAM,CAACE,QAAP,CAAgBC,MAAhB,EAAN;AACA,YAAMC,QAAQ,GAAG,IAAIZ,MAAM,CAACa,SAAP,CAAiBC,YAArB,CAAkCN,MAAM,CAACE,QAAzC,CAAjB;AACA,YAAMK,MAAM,GAAGH,QAAQ,CAACI,SAAT,EAAf;AAEA,YAAMC,gBAAgB,GAAG,IAAIhB,QAAJ,CACvBC,gBAAgB,CAACgB,QAAjB,CAA0BV,MAAM,CAACE,QAAP,CAAgBS,cAA1C,EAA0DC,OADnC,EAEvBlB,gBAAgB,CAACmB,GAFM,EAGvBN,MAHuB,CAAzB;AAMA,YAAMO,IAAI,GAAG,IAAIrB,QAAJ,CACXE,IAAI,CAACe,QAAL,CAAcV,MAAM,CAACE,QAAP,CAAgBS,cAA9B,EAA8CC,OADnC,EAC4C;AACvDjB,MAAAA,IAAI,CAACkB,GAFM,EAGXN,MAHW,CAAb;AAMAT,MAAAA,OAAO,CAAC;AAACM,QAAAA,QAAD;AAAWK,QAAAA,gBAAX;AAA6BK,QAAAA;AAA7B,OAAD,CAAP;AACD;;AACDhB,IAAAA,OAAO,CAAC;AAACM,MAAAA,QAAQ,EAAEW,SAAX;AAAsBN,MAAAA,gBAAgB,EAAEM,SAAxC;AAAmDD,MAAAA,IAAI,EAAEC;AAAzD,KAAD,CAAP;AACD,GArBD;AAsBD,CAvBD,CADF;;AA0BA,eAAenB,aAAf","sourcesContent":["import {ethers, Contract} from 'ethers';\nimport PaymentProcessor from './contracts/PaymentProcessor.json';\nimport Usdt from './contracts/usdt.json';\n\nconst getBlockchain = () =>\n  new Promise((resolve, reject) => {\n    window.addEventListener('load', async () => {\n      if(window.ethereum) {\n        await window.ethereum.enable();\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner();\n\n        const paymentProcessor = new Contract(\n          PaymentProcessor.networks[window.ethereum.networkVersion].address,\n          PaymentProcessor.abi,\n          signer\n        );\n\n        const usdt = new Contract(\n          Usdt.networks[window.ethereum.networkVersion].address, //for mainnet and public testnet replace by address of already deployed dai token\n          Usdt.abi,\n          signer\n        );\n\n        resolve({provider, paymentProcessor, usdt});\n      }\n      resolve({provider: undefined, paymentProcessor: undefined, usdt: undefined});\n    });\n  });\n\nexport default getBlockchain;"]},"metadata":{},"sourceType":"module"}